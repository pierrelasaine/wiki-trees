{% extends 'main.html' %}

{% block content %}
	<h1>{% if active_tab == 'SignUp' %}Sign Up{% else %}Upload{% endif %}</h1>
	{% if error_message %}
		<p class="error">{{ error_message }}</p>
	{% endif %}
  
    <form action="/upload" method="POST" enctype="multipart/form-data">
        <input type="text" name="name" placeholder="file name">
        <h3 style="font-weight: normal;">Drag & Drop File to Upload or Create a New Page</h3>
        <input type="file" name="file">
        <button type="submit", value = "Upload">Upload</button>
        <button type="button" onclick="openEditor()">Create New Page</button>
    </form>

    <!-- TinyMCE Text on open -->
    <div id="editor-container" style="display: none;">
		<textarea id="myTextarea">
			<h1 style="text-align: center;">Welcome, {{ username }}!</h1>
			<p style="text-align: center;">Type your page content here!</p>
		</textarea>
	</div>

    <!-- TODO: Pass HTML content to GCS bucket with "Save" button -->
    <!-- https://www.tiny.cloud/blog/how-to-get-content-and-set-content-in-tinymce/ -->

    <!-- TinyMCE Editor -->
    <script src="https://cdn.tiny.cloud/1/xlogwgferszklvq97hyyn4nlvvzpo56m4z02z1tcogkqb4qx/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>
    <script>
        function openEditor() {
            var editorContainer = document.getElementById('editor-container');
		    editorContainer.style.display = 'block';
            tinymce.init({
                selector: '#myTextarea',
                plugins: 'lists searchreplace checklist casechange tinymcespellchecker powerpaste autocorrect',
                toolbar: 'undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | align lineheight | checklist numlist bullist indent outdent | removeformat',
            });
        }
    </script>

{% endblock %}